#!/usr/bin/env python3
"""
æµ‹è¯•æ–°çš„æŠ•æ³¨æ ¼å¼å’Œæ¶ˆæ¯æ˜¾ç¤º
éªŒè¯æŠ•æ³¨ç±»å‹ä¸èµ”ç‡æ˜¾ç¤ºã€ç»„åˆæŠ•æ³¨ç©ºæ ¼åˆ†éš”ç­‰
"""

import asyncio
import logging
from bot.handlers.bet_message_monitor import BetMessageParser
from bot.tasks.lottery_scheduler import LotteryScheduler

# è®¾ç½®æ—¥å¿—
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

async def test_bet_formats():
    """æµ‹è¯•æŠ•æ³¨æ ¼å¼"""
    print("ğŸ² æµ‹è¯•æŠ•æ³¨æ ¼å¼å’Œæ¶ˆæ¯æ˜¾ç¤º")
    print("=" * 50)
    
    parser = BetMessageParser()
    scheduler = LotteryScheduler()
    
    # æµ‹è¯•æŠ•æ³¨æ¶ˆæ¯è§£æ
    print("ğŸ§ª æµ‹è¯•æŠ•æ³¨æ¶ˆæ¯è§£æ:")
    test_messages = [
        # åŸºç¡€æŠ•æ³¨
        "å¤§1000 å°500 å•200 åŒ300",
        # ç»„åˆæŠ•æ³¨ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰
        "å°å•100 å°åŒ200 å¤§å•300 å¤§åŒ400 è±¹å­50",
        # æ•°å­—æŠ•æ³¨
        "æ•°å­—8 æŠ¼100",
        "8 100",
        # æ··åˆæŠ•æ³¨
        "å¤§1000 å°å•100 æ•°å­—8 æŠ¼100",
        "å°500 å•200 è±¹å­50 æ•°å­—5 æŠ¼200",
        # é‡‘é¢åœ¨å‰
        "1000å¤§ 500å• 100å°å• 200å¤§åŒ",
        # ä¸­æ–‡æ•°å­—
        "æ•°å­—å…« æŠ¼100",
        "100æŠ¼å…«",
        # å¤æ‚ç»„åˆ
        "å¤§1000 å°å•100 å¤§åŒ200 è±¹å­50 æ•°å­—8 æŠ¼100",
    ]
    
    for i, message in enumerate(test_messages, 1):
        print(f"\nğŸ“ æµ‹è¯• {i}: {message}")
        bets = parser.parse_bet_message(message)
        if bets:
            print(f"    âœ… è§£ææˆåŠŸ: {len(bets)} ä¸ªæŠ•æ³¨")
            for j, bet in enumerate(bets, 1):
                if bet["type"] == "bet_type":
                    print(f"       {j}. {bet['bet_type']}: {bet['amount']}ç§¯åˆ†")
                else:
                    print(f"       {j}. æ•°å­—{bet['number']}: {bet['amount']}ç§¯åˆ†")
        else:
            print(f"    âŒ è§£æå¤±è´¥")
    
    print("\n" + "=" * 50)
    print("ğŸ“‹ æµ‹è¯•æŠ•æ³¨æ¶ˆæ¯æ ¼å¼:")
    
    # æ¨¡æ‹Ÿæ–°å¼€å¥–æœŸ
    from datetime import datetime
    new_draw = type('Draw', (), {
        'draw_number': '20250105120500124',
        'game_type': 'lottery'
    })()
    
    # æ˜¾ç¤ºæ–°ä¸€æœŸæŠ•æ³¨æ¶ˆæ¯æ ¼å¼
    print("ğŸ² æ–°ä¸€æœŸæŠ•æ³¨æ¶ˆæ¯æ ¼å¼:")
    print("ğŸ² **ç¬¬ 20250105120500124 æœŸå¼€å§‹æŠ•æ³¨**")
    print()
    print("â° **æŠ•æ³¨æ—¶é—´:** 5åˆ†é’Ÿ")
    print("ğŸ’° **æŠ•æ³¨æ–¹å¼:** å‘é€æ¶ˆæ¯æŠ•æ³¨ç§¯åˆ†")
    print()
    print("ğŸ“Š **æŠ•æ³¨ç±»å‹ä¸èµ”ç‡:**")
    print("ğŸ”¸ **å¤§å°å•åŒ:**")
    print("   å°(1,2,3,4) å¤§(6,7,8,9) å•(1,3,7,9) åŒ(2,4,6,8) - 2.36å€")
    print()
    print("ğŸ”¸ **ç»„åˆæŠ•æ³¨:**")
    print("   å°å•(1,3) å°åŒ(2,4) å¤§å•(7,9) å¤§åŒ(6,8) è±¹å­(0,5) - 4.60å€")
    print()
    print("ğŸ”¸ **æ•°å­—æŠ•æ³¨:**")
    print("   0-9ä»»æ„æ•°å­— - 9å€")
    print()
    print("ğŸ“ **æŠ•æ³¨æ ¼å¼:**")
    print("â€¢ å¤§1000 å°500 å•200")
    print("â€¢ å°å•100 å¤§åŒ200 è±¹å­50")
    print("â€¢ æ•°å­—8 æŠ¼100")
    print()
    print("ğŸ’¡ **ç¤ºä¾‹:** å¤§1000 å°å•100 æ•°å­—8 æŠ¼100")
    print()
    print("ğŸ¯ **å¼€å¥–æ—¶é—´:** 5åˆ†é’Ÿå")
    
    print("\n" + "=" * 50)
    print("ğŸ“Š æŠ•æ³¨ç±»å‹ä¸èµ”ç‡æ€»ç»“:")
    print()
    print("ğŸ”¸ **å¤§å°å•åŒæŠ•æ³¨:**")
    print("   ã€å°ã€‘ 1ã€2ã€3ã€4  èµ”ç‡ï¼š2.36å€")
    print("   ã€å¤§ã€‘ 6ã€7ã€8ã€9  èµ”ç‡ï¼š2.36å€")
    print("   ã€å•ã€‘ 1ã€3ã€7ã€9  èµ”ç‡ï¼š2.36å€")
    print("   ã€åŒã€‘ 2ã€4ã€6ã€8  èµ”ç‡ï¼š2.36å€")
    print()
    print("ğŸ”¸ **ç»„åˆæŠ•æ³¨:**")
    print("   ã€å°å•ã€‘ 1ã€3   èµ”ç‡ï¼š4.60å€")
    print("   ã€å°åŒã€‘ 2ã€4   èµ”ç‡ï¼š4.60å€")
    print("   ã€å¤§å•ã€‘ 7ã€9   èµ”ç‡ï¼š4.60å€")
    print("   ã€å¤§åŒã€‘ 6ã€8   èµ”ç‡ï¼š4.60å€")
    print("   ã€è±¹å­ã€‘ 0ã€5  èµ”ç‡ï¼š4.60å€")
    print()
    print("ğŸ”¸ **æ•°å­—æŠ•æ³¨:**")
    print("   ã€æŠ•æ³¨æ•°å­—ã€‘ 0-9ä»»æ„æ•°å­—  èµ”ç‡ï¼š9å€")
    
    print("\nâœ… æµ‹è¯•å®Œæˆï¼")
    print()
    print("ğŸ“ éªŒè¯ç»“æœ:")
    print("1. âœ… æŠ•æ³¨ç±»å‹ä¸èµ”ç‡å·²æ­£ç¡®æ˜¾ç¤º")
    print("2. âœ… ç»„åˆæŠ•æ³¨æ”¯æŒç©ºæ ¼åˆ†éš”")
    print("3. âœ… æ•°å­—æŠ•æ³¨èµ”ç‡9å€å·²é…ç½®")
    print("4. âœ… æŠ•æ³¨æ¶ˆæ¯æ ¼å¼å·²ä¼˜åŒ–")

if __name__ == "__main__":
    asyncio.run(test_bet_formats()) 